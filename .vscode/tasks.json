{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Workflow: Phase (write)",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/workflow_runner.py",
        "--phase",
        "${input:workflowPhase}",
        "--target-version",
        "${input:workflowVersion}",
        "--assistant",
        "${input:workflowAssistant}",
        "--mode",
        "write",
        "--owner",
        "${input:workflowOwner}",
        "--issue",
        "${input:workflowIssue}"
      ],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Workflow: Phase (review)",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/workflow_runner.py",
        "--phase",
        "${input:workflowPhase}",
        "--target-version",
        "${input:workflowVersion}",
        "--assistant",
        "${input:workflowAssistant}",
        "--mode",
        "review",
        "--issue",
        "${input:workflowIssue}"
      ],
      "group": "test",
      "problemMatcher": []
    },
    {
      "label": "Workflow: All (write)",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/workflow_runner.py",
        "--phase",
        "all",
        "--target-version",
        "${input:workflowVersion}",
        "--assistant",
        "${input:workflowAssistant}",
        "--mode",
        "write",
        "--owner",
        "${input:workflowOwner}",
        "--issue",
        "${input:workflowIssue}"
      ],
      "group": "build",
      "problemMatcher": []
    },
    {
      "label": "Workflow: Release Writer Lock",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/workflow_runner.py",
        "--release-writer-lock",
        "--assistant",
        "${input:workflowAssistant}",
        "--owner",
        "${input:workflowOwner}"
      ],
      "problemMatcher": []
    },
    {
      "label": "Workflow: Sync AI Adapters",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/sync_ai_adapters.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Workflow: Check AI Adapter Drift",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/sync_ai_adapters.py",
        "--check"
      ],
      "problemMatcher": []
    },
    {
      "label": "Workflow: Validate Release Docs",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/check_release_docs.py"
      ],
      "problemMatcher": []
    },
    {
      "label": "Workflow: Validate Release Docs + Logs",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/check_release_docs.py",
        "--require-logs"
      ],
      "problemMatcher": []
    },
    {
      "label": "Workflow: Legacy Validate",
      "type": "shell",
      "command": "bash",
      "args": [
        "scripts/workflow-runner.sh",
        "${input:workflowVersionNoV}",
        "validate"
      ],
      "problemMatcher": []
    },
    {
      "label": "MCP: GitHub Health Check",
      "type": "shell",
      "command": "scripts/mcp_github_health_check.sh",
      "options": {
        "cwd": "${workspaceFolder}"
      },
      "problemMatcher": []
    },
    {
      "label": "Dev: Run Tests",
      "type": "shell",
      "command": "python",
      "args": [
        "-m",
        "pytest",
        "tests/",
        "-v",
        "--tb=short"
      ],
      "options": {
        "env": {
          "PYTHONPATH": "loofi-fedora-tweaks"
        }
      },
      "group": "test",
      "problemMatcher": []
    },
    {
      "label": "Dev: Lint",
      "type": "shell",
      "command": "flake8",
      "args": [
        "loofi-fedora-tweaks/",
        "--max-line-length=150",
        "--ignore=E501,W503,E402,E722,E203"
      ],
      "group": "test",
      "problemMatcher": []
    },
    {
      "label": "Dev: Typecheck",
      "type": "shell",
      "command": "mypy",
      "args": [
        "loofi-fedora-tweaks/",
        "--ignore-missing-imports",
        "--no-error-summary"
      ],
      "group": "test",
      "problemMatcher": []
    },
    {
      "label": "Dev: Project Stats",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/project_stats.py",
        "--markdown"
      ],
      "problemMatcher": []
    },
    {
      "label": "Dev: Render Templates",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/sync_ai_adapters.py",
        "--render"
      ],
      "problemMatcher": []
    },
    {
      "label": "Dev: Bump Version (dry-run)",
      "type": "shell",
      "command": "python",
      "args": [
        "scripts/bump_version.py",
        "--dry-run",
        "${input:bumpVersion}"
      ],
      "problemMatcher": []
    }
  ],
  "inputs": [
    {
      "id": "workflowVersion",
      "type": "promptString",
      "description": "Workflow target version (example: v45.0)",
      "default": "v48.0"
    },
    {
      "id": "workflowVersionNoV",
      "type": "promptString",
      "description": "Workflow target version without v (example: 45.0)",
      "default": "48.0"
    },
    {
      "id": "workflowPhase",
      "type": "pickString",
      "description": "Workflow phase",
      "options": [
        "plan",
        "design",
        "build",
        "test",
        "doc",
        "package",
        "release"
      ],
      "default": "plan"
    },
    {
      "id": "workflowAssistant",
      "type": "pickString",
      "description": "Assistant identity for lock/reports",
      "options": [
        "codex",
        "claude",
        "copilot"
      ],
      "default": "codex"
    },
    {
      "id": "workflowOwner",
      "type": "promptString",
      "description": "Writer lock owner",
      "default": "loofi"
    },
    {
      "id": "workflowIssue",
      "type": "promptString",
      "description": "GitHub issue id (optional)",
      "default": ""
    },
    {
      "id": "bumpVersion",
      "type": "promptString",
      "description": "New version number (example: 33.0.0)",
      "default": ""
    }
  ]
}
